<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Air Quality Decision System</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        svg {
            display: inline-block;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Custom Geolocation Hook
        const useGeolocation = () => {
            const [state, setState] = useState({
                latitude: null,
                longitude: null,
                location: 'Detecting location...',
                loading: true,
                error: null,
            });

            const fetchLocation = async () => {
                setState(prev => ({ ...prev, loading: true, error: null }));

                if (!navigator.geolocation) {
                    setState(prev => ({
                        ...prev,
                        loading: false,
                        error: 'Geolocation is not supported',
                        location: 'Location unavailable',
                    }));
                    return;
                }

                navigator.geolocation.getCurrentPosition(
                    async (position) => {
                        const { latitude, longitude } = position.coords;
                        
                        try {
                            const response = await fetch(
                                `https://nominatim.openstreetmap.org/reverse?lat=${latitude}&lon=${longitude}&format=json`,
                                {
                                    headers: {
                                        'Accept-Language': 'en',
                                    },
                                }
                            );
                            
                            if (response.ok) {
                                const data = await response.json();
                                const city = data.address?.city || data.address?.town || data.address?.village || data.address?.county;
                                const stateRegion = data.address?.state;
                                const country = data.address?.country_code?.toUpperCase();
                                
                                let locationName = 'Unknown location';
                                if (city && stateRegion) {
                                    locationName = `${city}, ${stateRegion}`;
                                } else if (city && country) {
                                    locationName = `${city}, ${country}`;
                                } else if (city) {
                                    locationName = city;
                                }
                                
                                setState({
                                    latitude,
                                    longitude,
                                    location: locationName,
                                    loading: false,
                                    error: null,
                                });
                            } else {
                                setState({
                                    latitude,
                                    longitude,
                                    location: `${latitude.toFixed(2)}¬∞, ${longitude.toFixed(2)}¬∞`,
                                    loading: false,
                                    error: null,
                                });
                            }
                        } catch (error) {
                            setState({
                                latitude,
                                longitude,
                                location: `${latitude.toFixed(2)}¬∞, ${longitude.toFixed(2)}¬∞`,
                                loading: false,
                                error: null,
                            });
                        }
                    },
                    (error) => {
                        let errorMessage = 'Unable to get location';
                        if (error.code === 1) {
                            errorMessage = 'Location permission denied';
                        } else if (error.code === 2) {
                            errorMessage = 'Location unavailable';
                        } else if (error.code === 3) {
                            errorMessage = 'Location request timed out';
                        }
                        
                        setState(prev => ({
                            ...prev,
                            loading: false,
                            error: errorMessage,
                            location: 'Mumbai, India', // Fallback location
                        }));
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 300000,
                    }
                );
            };

            useEffect(() => {
                fetchLocation();
            }, []);

            return { ...state, refetch: fetchLocation };
        };

        // Simple icon components
        const Cloud = ({ className }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" /></svg>;
        const Wind = ({ className }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>;
        const Activity = ({ className }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>;
        const AlertCircle = ({ className }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4m0 4v.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>;
        const CheckCircle = ({ className }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>;
        const XCircle = ({ className }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 14l5.5-5.5M3 12a9 9 0 1118 0 9 9 0 01-18 0z" /></svg>;
        const Loader2 = ({ className }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>;
        const MapPin = ({ className }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /></svg>;
        const Calendar = ({ className }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>;
        const TrendingUp = ({ className }) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>;

        const AirQualityDecisionSystem = () => {
            const [location, setLocation] = useState('');
            const geoLocation = useGeolocation();
            const [healthProfile, setHealthProfile] = useState({
                conditions: [],
                age: '',
                activityLevel: 'moderate'
            });
            const [loading, setLoading] = useState(false);
            const [decision, setDecision] = useState(null);
            const [showProfileSetup, setShowProfileSetup] = useState(true);
            const [coordinates, setCoordinates] = useState({ lat: 19.0760, lon: 72.8777 });

            // Update coordinates when GPS location is detected
            useEffect(() => {
                if (geoLocation.latitude && geoLocation.longitude) {
                    setCoordinates({ lat: geoLocation.latitude, lon: geoLocation.longitude });
                    setLocation(geoLocation.location);
                }
            }, [geoLocation.latitude, geoLocation.longitude]);

            const healthConditions = [
                'Asthma',
                'COPD',
                'Heart Disease',
                'Allergies',
                'Pregnancy',
                'Children (under 12)',
                'Elderly (65+)',
                'None'
            ];

            const activityLevels = [
                { value: 'light', label: 'Light (Walking, errands)' },
                { value: 'moderate', label: 'Moderate (Jogging, cycling)' },
                { value: 'intense', label: 'Intense (Running, sports)' }
            ];

            const toggleCondition = (condition) => {
                if (condition === 'None') {
                    setHealthProfile(prev => ({ ...prev, conditions: ['None'] }));
                } else {
                    setHealthProfile(prev => {
                        const filtered = prev.conditions.filter(c => c !== 'None');
                        if (filtered.includes(condition)) {
                            return { ...prev, conditions: filtered.filter(c => c !== condition) };
                        }
                        return { ...prev, conditions: [...filtered, condition] };
                    });
                }
            };

            // API Configuration
            const RAPIDAPI_KEY = '9d5cf00132mshfb203d0d02226afp12341djsnabe411eb8378';
            const WEATHER_API_HOST = 'open-weather13.p.rapidapi.com';
            const WAQI_TOKEN = 'e47ccb9f3bd66f152ea701ad4063d07748d60120';

            const fetchRealTimeData = async () => {
                try {
                    let lat = coordinates.lat;
                    let lon = coordinates.lon;
                    let cityName = location || 'Mumbai';

                    if (location) {
                        try {
                            const geocodeResponse = await fetch(
                                `https://open-weather13.p.rapidapi.com/city/${encodeURIComponent(location)}`,
                                {
                                    method: 'GET',
                                    headers: {
                                        'x-rapidapi-key': RAPIDAPI_KEY,
                                        'x-rapidapi-host': WEATHER_API_HOST
                                    }
                                }
                            );
                            const geocodeData = await geocodeResponse.json();
                            if (geocodeData.coord) {
                                lat = geocodeData.coord.lat;
                                lon = geocodeData.coord.lon;
                                cityName = geocodeData.name || location;
                                setCoordinates({ lat, lon });
                            }
                        } catch (e) {
                            console.log('Geocoding failed, using default coordinates');
                        }
                    }

                    const weatherResponse = await fetch(
                        `https://open-weather13.p.rapidapi.com/city/latlon/${lat}/${lon}`,
                        {
                            method: 'GET',
                            headers: {
                                'x-rapidapi-key': RAPIDAPI_KEY,
                                'x-rapidapi-host': WEATHER_API_HOST
                            }
                        }
                    );
                    const weatherData = await weatherResponse.json();

                    const aqiResponse = await fetch(
                        `https://api.waqi.info/feed/geo:${lat};${lon}/?token=${WAQI_TOKEN}`
                    );
                    const aqiData = await aqiResponse.json();

                    if (aqiData.status !== 'ok') {
                        throw new Error('WAQI API error');
                    }

                    const aqiInfo = aqiData.data;
                    const iaqi = aqiInfo.iaqi || {};
                    
                    return {
                        aqi: aqiInfo.aqi || 50,
                        pm25: iaqi.pm25?.v || Math.round(aqiInfo.aqi * 0.4),
                        pm10: iaqi.pm10?.v || Math.round(aqiInfo.aqi * 0.6),
                        o3: iaqi.o3?.v || Math.round(aqiInfo.aqi * 0.3),
                        temperature: Math.round((weatherData.main?.temp || 288) - 273.15),
                        humidity: weatherData.main?.humidity || iaqi.h?.v || 60,
                        location: aqiInfo.city?.name || cityName,
                        lastUpdate: aqiInfo.time?.s || new Date().toISOString(),
                        coordinates: { lat, lon }
                    };
                } catch (error) {
                    console.error('Error fetching real-time data:', error);
                    return {
                        aqi: Math.floor(Math.random() * 150) + 30,
                        pm25: Math.floor(Math.random() * 80) + 15,
                        pm10: Math.floor(Math.random() * 120) + 25,
                        o3: Math.floor(Math.random() * 60) + 20,
                        temperature: Math.floor(Math.random() * 20) + 15,
                        humidity: Math.floor(Math.random() * 40) + 40,
                        location: location || 'Mumbai, Maharashtra',
                        error: true
                    };
                }
            };

            const analyzeAirQuality = async () => {
                setLoading(true);
                
                const environmentalData = await fetchRealTimeData();

                try {
                    const response = await fetch('http://localhost:5000/api/analyze', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            aqi: environmentalData.aqi,
                            pm25: environmentalData.pm25,
                            pm10: environmentalData.pm10,
                            o3: environmentalData.o3,
                            temperature: environmentalData.temperature,
                            humidity: environmentalData.humidity,
                            location: environmentalData.location,
                            healthProfile: healthProfile
                        })
                    });

                    if (!response.ok) throw new Error('Backend error');
                    
                    const data = await response.json();
                    setDecision({
                        ...data,
                        environmentalData: environmentalData,
                        timestamp: new Date().toISOString()
                    });
                } catch (error) {
                    console.error('Analysis error:', error);
                    const aqi = environmentalData.aqi;
                    setDecision({
                        verdict: aqi < 50 ? 'GO' : aqi < 100 ? 'CAUTION' : 'NO-GO',
                        riskLevel: aqi < 50 ? 'Low' : aqi < 100 ? 'Moderate' : 'High',
                        primaryConcern: 'Air quality analysis',
                        explanation: 'Real-time data analysis. Air quality is ' + (aqi < 50 ? 'good - safe to go outside!' : aqi < 100 ? 'moderate - use caution.' : 'unhealthy - avoid outdoor activities.'),
                        recommendations: ['Monitor air quality regularly', 'Take breaks from outdoor activity', 'Use air purifiers indoors'],
                        forecast: 'Check back later for updated forecast',
                        safeTiming: 'Early morning (before 9 AM) or late evening (after 6 PM)',
                        environmentalData: environmentalData,
                        timestamp: new Date().toISOString()
                    });
                }
                
                setLoading(false);
            };

            const getVerdictColor = (verdict) => {
                switch(verdict) {
                    case 'GO': return 'bg-green-500';
                    case 'CAUTION': return 'bg-yellow-500';
                    case 'NO-GO': return 'bg-red-500';
                    default: return 'bg-gray-500';
                }
            };

            const getVerdictIcon = (verdict) => {
                switch(verdict) {
                    case 'GO': return <CheckCircle className="w-16 h-16" />;
                    case 'CAUTION': return <AlertCircle className="w-16 h-16" />;
                    case 'NO-GO': return <XCircle className="w-16 h-16" />;
                    default: return null;
                }
            };

            const getAQICategory = (aqi) => {
                if (aqi <= 50) return { label: 'Good', color: 'text-green-600' };
                if (aqi <= 100) return { label: 'Moderate', color: 'text-yellow-600' };
                if (aqi <= 150) return { label: 'Unhealthy for Sensitive', color: 'text-orange-600' };
                if (aqi <= 200) return { label: 'Unhealthy', color: 'text-red-600' };
                if (aqi <= 300) return { label: 'Very Unhealthy', color: 'text-purple-600' };
                return { label: 'Hazardous', color: 'text-red-900' };
            };

            if (showProfileSetup && !decision) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
                        <div className="max-w-2xl mx-auto">
                            <div className="bg-white rounded-2xl shadow-xl p-8">
                                <h1 className="text-3xl font-bold text-gray-900 mb-2">Air Quality Health Decision System</h1>
                                <p className="text-gray-600 mb-8">Real-time air quality analysis with personalized guidance</p>

                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            <MapPin className="w-4 h-4 inline mr-1" />
                                            Your Location {geoLocation.loading && '(Detecting...)'}
                                        </label>
                                        <div className="flex gap-2">
                                            <input
                                                type="text"
                                                placeholder="GPS location detected or enter city name"
                                                value={location}
                                                onChange={(e) => setLocation(e.target.value)}
                                                className="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                disabled={geoLocation.loading}
                                            />
                                            <button
                                                onClick={geoLocation.refetch}
                                                className="px-4 py-3 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors font-medium"
                                                title="Refresh GPS location"
                                            >
                                                üìç
                                            </button>
                                        </div>
                                        {geoLocation.error && (
                                            <p className="text-sm text-orange-600 mt-2">‚ö†Ô∏è {geoLocation.error}</p>
                                        )}
                                        {geoLocation.latitude && (
                                            <p className="text-xs text-gray-500 mt-1">
                                                üìç {geoLocation.latitude.toFixed(4)}¬∞, {geoLocation.longitude.toFixed(4)}¬∞
                                            </p>
                                        )}
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-3">
                                            <Activity className="w-4 h-4 inline mr-1" />
                                            Health Conditions (Select all that apply)
                                        </label>
                                        <div className="grid grid-cols-2 gap-3">
                                            {healthConditions.map(condition => (
                                                <button
                                                    key={condition}
                                                    onClick={() => toggleCondition(condition)}
                                                    className={`px-4 py-3 rounded-lg border-2 transition-all ${
                                                        healthProfile.conditions.includes(condition)
                                                            ? 'border-blue-500 bg-blue-50 text-blue-700'
                                                            : 'border-gray-200 bg-white text-gray-700 hover:border-gray-300'
                                                    }`}
                                                >
                                                    {condition}
                                                </button>
                                            ))}
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            Age Group (Optional)
                                        </label>
                                        <input
                                            type="text"
                                            placeholder="e.g., 25-34, 65+"
                                            value={healthProfile.age}
                                            onChange={(e) => setHealthProfile(prev => ({ ...prev, age: e.target.value }))}
                                            className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-3">
                                            <Wind className="w-4 h-4 inline mr-1" />
                                            Planned Activity Level
                                        </label>
                                        <div className="space-y-2">
                                            {activityLevels.map(level => (
                                                <button
                                                    key={level.value}
                                                    onClick={() => setHealthProfile(prev => ({ ...prev, activityLevel: level.value }))}
                                                    className={`w-full px-4 py-3 rounded-lg border-2 transition-all text-left ${
                                                        healthProfile.activityLevel === level.value
                                                            ? 'border-blue-500 bg-blue-50 text-blue-700'
                                                            : 'border-gray-200 bg-white text-gray-700 hover:border-gray-300'
                                                    }`}
                                                >
                                                    {level.label}
                                                </button>
                                            ))}
                                        </div>
                                    </div>

                                    <button
                                        onClick={() => {
                                            setShowProfileSetup(false);
                                            analyzeAirQuality();
                                        }}
                                        disabled={healthProfile.conditions.length === 0}
                                        className="w-full bg-blue-600 text-white py-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed"
                                    >
                                        Analyze Air Quality Now
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
                    <div className="max-w-4xl mx-auto">
                        {loading ? (
                            <div className="bg-white rounded-2xl shadow-xl p-12 text-center">
                                <div className="w-16 h-16 mx-auto mb-4 animate-spin text-blue-600">
                                    <Loader2 className="w-full h-full" />
                                </div>
                                <h2 className="text-2xl font-bold text-gray-900 mb-2">Analyzing Conditions</h2>
                                <p className="text-gray-600">Fetching real-time data from weather and air quality APIs...</p>
                            </div>
                        ) : decision ? (
                            <div className="space-y-6">
                                {/* Main Verdict Card */}
                                <div className={`${getVerdictColor(decision.verdict)} rounded-2xl shadow-xl p-8 text-white`}>
                                    <div className="flex items-center justify-between mb-4">
                                        <div>
                                            <h1 className="text-4xl font-bold mb-2">{decision.verdict}</h1>
                                            <p className="text-xl opacity-90">Risk Level: {decision.riskLevel}</p>
                                        </div>
                                        {getVerdictIcon(decision.verdict)}
                                    </div>
                                    <p className="text-lg opacity-95">{decision.primaryConcern}</p>
                                </div>

                                {/* Environmental Data */}
                                <div className="bg-white rounded-2xl shadow-xl p-6">
                                    <h2 className="text-xl font-bold text-gray-900 mb-4 flex items-center">
                                        <Cloud className="w-5 h-5 mr-2" />
                                        Current Environmental Conditions
                                    </h2>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <div className="text-center p-4 bg-gray-50 rounded-lg">
                                            <div className={`text-3xl font-bold mb-1 ${getAQICategory(decision.environmentalData.aqi).color}`}>
                                                {decision.environmentalData.aqi}
                                            </div>
                                            <div className="text-sm text-gray-600">AQI</div>
                                            <div className={`text-xs mt-1 ${getAQICategory(decision.environmentalData.aqi).color}`}>
                                                {getAQICategory(decision.environmentalData.aqi).label}
                                            </div>
                                        </div>
                                        <div className="text-center p-4 bg-gray-50 rounded-lg">
                                            <div className="text-2xl font-bold text-gray-900 mb-1">{decision.environmentalData.pm25}</div>
                                            <div className="text-sm text-gray-600">PM2.5</div>
                                            <div className="text-xs text-gray-500">Œºg/m¬≥</div>
                                        </div>
                                        <div className="text-center p-4 bg-gray-50 rounded-lg">
                                            <div className="text-2xl font-bold text-gray-900 mb-1">{decision.environmentalData.temperature}¬∞</div>
                                            <div className="text-sm text-gray-600">Temperature</div>
                                            <div className="text-xs text-gray-500">Celsius</div>
                                        </div>
                                        <div className="text-center p-4 bg-gray-50 rounded-lg">
                                            <div className="text-2xl font-bold text-gray-900 mb-1">{decision.environmentalData.humidity}%</div>
                                            <div className="text-sm text-gray-600">Humidity</div>
                                            <div className="text-xs text-gray-500">Relative</div>
                                        </div>
                                    </div>
                                    <div className="mt-4 flex items-center text-sm text-gray-600">
                                        <MapPin className="w-4 h-4 mr-1" />
                                        {decision.environmentalData.location}
                                        <span className="mx-2">‚Ä¢</span>
                                        <Calendar className="w-4 h-4 mr-1" />
                                        {new Date(decision.timestamp).toLocaleString()}
                                    </div>
                                </div>

                                {/* AI Explanation */}
                                <div className="bg-white rounded-2xl shadow-xl p-6">
                                    <h2 className="text-xl font-bold text-gray-900 mb-3 flex items-center">
                                        <AlertCircle className="w-5 h-5 mr-2" />
                                        Why This Decision?
                                    </h2>
                                    <p className="text-gray-700 leading-relaxed">{decision.explanation}</p>
                                </div>

                                {/* Recommendations */}
                                <div className="bg-white rounded-2xl shadow-xl p-6">
                                    <h2 className="text-xl font-bold text-gray-900 mb-4">Recommended Actions</h2>
                                    <ul className="space-y-3">
                                        {decision.recommendations.map((rec, idx) => (
                                            <li key={idx} className="flex items-start">
                                                <div className="bg-blue-100 rounded-full p-1 mr-3 mt-0.5">
                                                    <CheckCircle className="w-4 h-4 text-blue-600" />
                                                </div>
                                                <span className="text-gray-700">{rec}</span>
                                            </li>
                                        ))}
                                    </ul>
                                </div>

                                {/* Forecast & Timing */}
                                <div className="grid md:grid-cols-2 gap-6">
                                    <div className="bg-white rounded-2xl shadow-xl p-6">
                                        <h2 className="text-lg font-bold text-gray-900 mb-3 flex items-center">
                                            <TrendingUp className="w-5 h-5 mr-2" />
                                            Short-term Forecast
                                        </h2>
                                        <p className="text-gray-700">{decision.forecast}</p>
                                    </div>
                                    <div className="bg-white rounded-2xl shadow-xl p-6">
                                        <h2 className="text-lg font-bold text-gray-900 mb-3 flex items-center">
                                            <Calendar className="w-5 h-5 mr-2" />
                                            Safer Timing
                                        </h2>
                                        <p className="text-gray-700">{decision.safeTiming}</p>
                                    </div>
                                </div>

                                {/* Action Buttons */}
                                <div className="flex gap-4">
                                    <button
                                        onClick={analyzeAirQuality}
                                        className="flex-1 bg-blue-600 text-white py-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors"
                                    >
                                        Refresh Analysis
                                    </button>
                                    <button
                                        onClick={() => {
                                            setDecision(null);
                                            setShowProfileSetup(true);
                                        }}
                                        className="flex-1 bg-gray-600 text-white py-4 rounded-lg font-semibold hover:bg-gray-700 transition-colors"
                                    >
                                        Update Profile
                                    </button>
                                </div>
                            </div>
                        ) : null}
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<AirQualityDecisionSystem />);
    </script>
</body>
</html>
